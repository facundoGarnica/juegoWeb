{% if error %}
    <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
{% endif %}

<form method="post" action="{{ path('app_login_check') }}" autocomplete="off">
    <div class="mb-3">
        <label for="inputUsername" class="form-label">Usuario</label>
        <input 
            type="text" 
            value="{{ last_username }}" 
            name="_username" 
            id="inputUsername" 
            class="form-control" 
            autocomplete="off" 
            required 
            autofocus
        >
    </div>
    
    <div class="mb-3">
        <label for="inputPassword" class="form-label">Contraseña</label>
        <input 
            type="password" 
            name="_password" 
            id="inputPassword" 
            class="form-control" 
            autocomplete="new-password" 
            required
        >
    </div>

    <input type="hidden" name="_csrf_token" value="{{ csrf_token('authenticate') }}">

    <button class="btn btn-primary" type="submit">Iniciar Sesión</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const passwordInput = document.getElementById('inputPassword');
    if (passwordInput && !document.getElementById('togglePassword')) {
        const toggleButton = document.createElement('button');
        toggleButton.type = 'button';
        toggleButton.id = 'togglePassword';
        toggleButton.className = 'btn btn-secondary mt-2';
        toggleButton.textContent = 'Mostrar Contraseña';
        
        toggleButton.addEventListener('click', function() {
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                toggleButton.textContent = 'Ocultar Contraseña';
            } else {
                passwordInput.type = 'password';
                toggleButton.textContent = 'Mostrar Contraseña';
            }
        });
        
        passwordInput.parentNode.appendChild(toggleButton);
    }
});
</script>
